{{ range $pvIndex, $pv := .Values.persistentFilesystemVolumes }}
{{ range $nodeNum, $nodes := until ($.Values.numNodes | int) }}
apiVersion: v1
kind: PersistentVolumeClaim
metadata:
  name: {{ $pv.name }}-node{{ add $nodeNum 1 }}
spec:
  accessModes:
    - ReadWriteMany
  volumeMode: Filesystem
  resources:
    requests:
      storage: {{ $.Values.pvcSize }}
  volumeName: {{ $pv.name }}-node{{ add $nodeNum 1 }}
---
{{ end }}
{{ end }}
